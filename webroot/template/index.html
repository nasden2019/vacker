<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <meta name="description" content="Template Alma">
        <meta name="author" content="Syloper">

        <title>Inicio | Template Alma</title>

        <!-- <link rel="apple-touch-icon-precomposed" sizes="57x57" href="apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="&nbsp;" />
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="mstile-310x310.png" /> -->

        <link rel="stylesheet" href="/webroot/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/webroot/css/main.min.css" />
    </head>

    <body>

        <div id="contenedor-sitio">    
         
            <!-- Loader que paarece mientras carga el sitio -->
            <div class="loader"></div>

            <!-- Cajas filtro -->
            <div class="cajas">
                
                <!-- Primer caja para elegir relacion -->
                <section class="caja activa" style="background-image: url(/webroot/img/backs/chicas/imagen1.jpg);">
                    <div class="overlay"></div>
                    <div class="opcion_seleccionada retroceder">
                        <p>Relaci√≥n seleccionada</p>
                    </div>

                    <div class="contenido-caja h-100">
                        <div class="container h-100">
                            <div class="row h-100 justify-content-center align-content-center align-items-center">
                                <div class="col-10 text-center">
                                    <a href="#" class="btn btn-primary avanzar">Relacion 1</a>
                                    <a href="#" class="btn btn-primary avanzar">Relacion 2</a>
                                    <a href="#" class="btn btn-primary avanzar">Relacion 3</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </section>
                <!-- // Primer caja para elegir relacion -->
                
                <!-- Segunda caja para elegir etapa -->
                <section class="caja oculta" style="background-image: url(/webroot/img/backs/chicas/imagen3.jpg);">
                    <div class="overlay"></div>

                    <div class="opcion_seleccionada retroceder">
                        <p>Etapa seleccionada</p>
                    </div>

                    <div class="contenido-caja h-100">
                        <div class="container h-100">
                            <div class="row h-100 justify-content-center align-content-center align-items-center">
                                <div class="col-10 text-center">
                                    <a href="#" class="btn btn-primary avanzar">Etapa 1</a>
                                    <a href="#" class="btn btn-primary avanzar">Etapa 2</a>
                                    <a href="#" class="btn btn-primary avanzar">Etapa 3</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </section>
                <!-- // Segunda caja para elegir etapa -->
                
                <!-- Tercera caja para elegir historias -->
                <section class="caja oculta" style="background-image: url(/webroot/img/backs/chicas/imagen2.jpg);">
                    <div class="overlay"></div>
                    <!-- <a href="#" class="btn btn-primary avanzar">avanzar</a> -->
                    
                    <div class="contenido-caja h-100">
                        <div class="container h-100">
                            <div class="row h-100 justify-content-center align-content-center align-items-center">
                                <div class="col-10 text-center">
                                    <h1 style="color:white;">Historias</h1>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </section>
                <!-- // Tercera caja para elegir historias -->

            </div>
            <!-- // Cajas filtro -->

        </div>

        <script src="/webroot/js/jquery-3.2.1.min.js"></script>
        <script src="/webroot/js/bootstrap.min.js"></script>
        <script src="/webroot/js/alma.min.js"></script>

        <script>
            
            $(function() {
                
                setTimeout(() => {
                    $('#contenedor-sitio').addClass('loaded');
                }, 800);

                $('.avanzar').on('click', function (e) {
                    
                    e.preventDefault();
                    
                    $('.caja.activa').removeClass('activa');
                    $(this).closest('.caja')
                        .addClass('completa')
                        .next()
                        .removeClass('oculta')
                        .addClass('activa');
                });

                $('.retroceder').on('click', function (e) {
                    
                    e.preventDefault();
                    
                    $('.caja.activa').removeClass('activa').addClass('oculta');
                    
                    $(this).closest('.caja')
                        .removeClass('completa')
                        .addClass('activa');
                    
                    quitar($(this).closest('.caja'));

                        /* console.log($(this).closest('.caja'));
                        console.log($(this).closest('.caja').next('.caja'));
                        
                         */

                    /* if ($(this).closest('.caja').next('.caja').length) {
                        quitar($(this).closest('.caja').next('.caja'));
                    } */
                });

                function quitar(elemento) {

                    console.log(elemento);

                    if (elemento.next('.caja').length) {
                        
                        console.log('Tiene siguiente');

                        elemento.next('.caja')
                            .removeClass('activa completa')
                            .addClass('oculta');

                        quitar(elemento.next('.caja'));
                    }
                    
                }

            });
        
        </script>

    </body>
</html>